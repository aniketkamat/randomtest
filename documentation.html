<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fastrerandomize Documentation</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Times New Roman, Times New Roman;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #918e8e;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 20px;   
        }
        nav ul {
            list-style-type: none;
            padding: 0;
        }
        nav ul li {
            display: inline;
            margin: 0 10px;
        }
        nav ul li a {
            color: white;
            text-decoration: none;
        }
        main {
            padding: 20px;
        }
        aside {
            float: left;
            width: 20%;
        }
        aside ul {
            list-style-type: none;
            padding: 0;
        }
        aside ul li {
            margin: 10px 0;
        }
        aside ul li a {
            display: block;
            padding: 10px;
            text-decoration: none;
            color: black;
        }
        aside ul li a:hover,
        aside ul li a:active {
            border-left: 5px solid blue;
            background-color: #f0f0f0;
        }
        section {
            float: right;
            width: 75%;
        }
        section h1 {
            margin-top: 0;
        }
        footer {
            clear: both;
            background-color: #918e8e;
            color: white;
            text-align: center;
            padding: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="install.html">Install</a></li>
                <li><a href="documentation.html">Documentation</a></li>
                <li><a href="aboutus.html">About Us</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
        <h1>fastrerandomize</h1>
    </header>
    <main>
        <aside>
            <ul>
                <li><a href="#generate_randomizations">generate_randomizations</a></li>
                <li><a href="#generate_randomizations_mc">generate_randomizations_mc</a></li>
                <li><a href="#randomization_test">randomization_test</a></li>
                <!-- Add more links as needed -->
            </ul>
        </aside>
        <section>
            <h1>Documentation</h1>
            <div class="function" id="generate_randomizations">
                <h2>generate_randomizations</h2>
                <div class="shaded">Parameters:</div>
                <ol class="input-output"> <b>n_units:</b> An integer specifying the total number of experimental units. </ol> 
                <ol class="input-output"> <b>n_treated:</b> An integer specifying the number of units to be assigned to treatment. </ol> 
                <ol class="input-output"> <b>X:</b> A numeric matrix of covariates used for balance checking. Cannot be <code> NULL</code>. </ol> 
                <ol class="input-output"> <b>randomization_accept_prob:</b> A numeric value between 0 and 1 specifying the probability threshold for accepting randomizations based on balance. </ol> 
                <ol class="input-output"> <b>threshold_func:</b> A 'JAX' function that computes a balance measure for each randomization. Only used for Monte Carlo sampling. </ol> 
                <ol class="input-output"> <b>max_draws:</b> An integer specifying the maximum number of randomizations to draw in Monte Carlo sampling. </ol> 
                <ol class="input-output"> <b>batch_size:</b> An integer specifying batch size for Monte Carlo processing. </ol> 
                <ol class="input-output"> <b>randomization_type:</b> A string specifying the type of randomization: either <code>exact</code> or <code>monte_carlo</code>. </ol> 
                <ol class="input-output"> <b>approximate_inv:</b> A logical value indicating whether to use an approximate inverse. </ol>
                <ol class="input-output"> <b>file:</b> A string specifying where to save candidate randomizations (if saving, not returning). </ol> 
                <ol class="input-output"> <b>return_type:</b> A string specifying the format of the returned randomizations and balance measures. Allowed values are <code>R</code> for base R objects (e.g., <code>matrix</code>, <code>numeric</code>) or <code>jax</code> for 'JAX' arrays. Default is <code>R</code>. </ol> 
                <ol class="input-output"> <b>verbose:</b> A logical value indicating whether to print progress information. Default is <code>True</code>. </ol> 
                <ol class="input-output"> <b>conda_env:</b> A character string specifying the name of the conda environment to use via <code>reticulate</code>. Default is <code>fastrerandomize</code>. </ol> 
                <ol class="input-output"> <b>conda_env_required:</b> A logical indicating whether the specified conda environment must be strictly used. If <code>True</code>, an error is thrown if the environment is not found. Default is <code>True</code>. </ol>
                <div class="shaded">Returns:</div>
                <ol class="input-output"> <b>assignments:</b> An array where each row represents one possible treatment assignment vector containing the accepted randomizations. </ol> 
                <ol class="input-output"> <b>balance_measures:</b> A numeric vector containing the balance measure for each corresponding randomization. </ol> 
                <ol class="input-output"> <b>fastrr_env:</b> The fastrerandomize environment. </ol> <ol class="input-output"> <b>file_output:</b> If file is specified, results are saved to the given file path instead of being returned. </ol>
            </div>
            <div class="function" id="generate_randomizations_mc">
                <h2>generate_randomizations_mc</h2>
                <div class="shaded">Parameters:</div>
                <ol class="input-output"> <b>n_units:</b> An integer specifying the total number of experimental units. </ol> 
                <ol class="input-output"> <b>n_treated:</b> An integer specifying the number of units to be assigned to treatment. </ol> 
                <ol class="input-output"> <b>X:</b> A numeric matrix of covariates used for balance checking. Cannot be NULL. </ol> 
                <ol class="input-output"> <b>randomization_accept_prob:</b> A numeric value between 0 and 1 specifying the probability threshold for accepting randomizations based on balance. Default is 1. </ol> 
                <ol class="input-output"> <b>threshold_func:</b> A JAX function that computes a balance measure for each randomization. Must be vectorized using \<code>jax$vmap</code> with <code>in_axes = list(NULL, 0L, NULL, NULL)</code>, and inputs covariates (matrix of X), treatment_assignment (vector of 0s and 1s), n0 (scalar), n1 (scalar). Default is <code>VectorizedFastHotel2T2</code> which uses Hotelling's T-squared statistic. </ol> 
                <ol class="input-output"> <b>max_draws:</b> An integer specifying the maximum number of randomizations to draw. </ol> 
                <ol class="input-output"> <b>batch_size:</b> An integer specifying how many randomizations to process at once. Lower values use less memory but may be slower. </ol> 
                <ol class="input-output"> <b>approximate_inv:</b> A logical value indicating whether to use an approximate inverse (diagonal of the covariance matrix) instead of the full matrix inverse when computing balance metrics. This can speed up computations for high-dimensional covariates. Default is <code>True</code>. </ol> 
                <ol class="input-output"> <b>verbose:</b> A logical value indicating whether to print detailed information about batch processing progress and GPU memory usage. Default is <code>False</code>. </ol> 
                <ol class="input-output"> <b>conda_env:</b> A character string specifying the name of the conda environment to use via <code>reticulate</code>. Default is <code>fastrerandomize</code>. </ol> 
                <ol class="input-output"> <b>conda_env_required:</b> A logical indicating whether the specified conda environment must be strictly used. If <code>True</code>, an error is thrown if the environment is not found. Default is <code>True</code>. </ol>
                <div class="shaded">Returns:</div>
                <ol class="input-output"> <b>candidate_randomizations:</b> An array of randomization vectors. </ol> 
                <ol class="input-output"> <b>M_candidate_randomizations:</b> An array of their balance measures. </ol>
            </div> 
            <div class="function" id="randomization_test">
              <h2>randomization_test</h2>
              <div class="shaded">Parameters:</div>
              <ol class="input-output"> <b>obsW:</b> A numeric vector where 0's correspond to control units and 1's to treated units. </ol> 
              <ol class="input-output"> <b>obsY:</b> An optional numeric vector of observed outcomes. If not provided, the function assumes a NULL value. </ol> 
              <ol class="input-output"> <b>X:</b> A numeric matrix of covariates. </ol> 
              <ol class="input-output"> <b>alpha:</b> The significance level for the test. Default is 0.05. </ol> 
              <ol class="input-output"> <b>candidate_randomizations:</b> A numeric matrix of candidate randomizations. </ol> 
              <ol class="input-output"> <b>candidate_randomizations_array:</b> An optional 'JAX' array of candidate randomizations. If not provided, the function coerces candidate_randomizations into a 'JAX' array. </ol> 
              <ol class="input-output"> <b>n0_array:</b> An optional array specifying the number of control units. </ol> 
              <ol class="input-output"> <b>n1_array:</b> An optional array specifying the number of treated units. </ol> 
              <ol class="input-output"> <b>randomization_accept_prob:</b> A numeric scalar or vector of probabilities for accepting each randomization. </ol> 
              <ol class="input-output"> <b>findFI:</b> A logical value indicating whether to find the fiducial interval. Default is FALSE. </ol> 
              <ol class="input-output"> <b>c_initial:</b> A numeric value representing the initial criterion for the randomization. Default is 2. </ol> 
              <ol class="input-output"> <b>max_draws:</b> An integer specifying the maximum number of candidate randomizations to generate (or to consider) for the test when <code>randomization_type = "monte_carlo"</code>. Default is <code>1e6</code>. </ol> 
              <ol class="input-output"> <b>batch_size:</b> An integer specifying the batch size for Monte Carlo sampling. Batches are processed one at a time for memory efficiency. Default is <code>1e5</code>. </ol> 
              <ol class="input-output"> <b>randomization_type:</b> A string specifying the type of randomization for the test. Allowed values are "exact" or "monte_carlo". Default is "monte_carlo". </ol> 
              <ol class="input-output"> <b>approximate_inv:</b> A logical value indicating whether to use an approximate inverse (diagonal of the covariance matrix) instead of the full matrix inverse when computing balance metrics. This can speed up computations for high-dimensional covariates. Default is \code{TRUE}. </ol> 
              <ol class="input-output"> <b>file:</b> A character string specifying the path (including filename) where candidate randomizations will be saved or loaded from. If <code>NULL</code>, randomizations remain in memory. Default is NULL. </ol> 
              <ol class="input-output"> <b>conda_env:</b> A character string specifying the name of the conda environment to use via <code>reticulate</code>. Default is <code>"fastrerandomize"</code>. </ol> 
              <ol class="input-output"> <b>conda_env_required:</b> A logical indicating whether the specified conda environment must be strictly used. If <code>TRUE</code>, an error is thrown if the environment is not found. Default is <code>TRUE</code>. </ol>
              <div class="shaded">Returns:</div>
              <ol class="input-output"> <b>p_value:</b> A numeric value or vector representing the p-value of the test (or the expected p-value under the prior structure specified in the function inputs). </ol> 
              <ol class="input-output"> <b>FI:</b> A numeric vector representing the fiducial interval if <code>findFI=TRUE</code>. </ol> 
              <ol class="input-output"> <b>tau_obs:</b> A numeric value or vector representing the estimated treatment effect(s). </ol> <ol class="input-output"> <b>fastrr_env:</b> The fastrerandomize environment. </ol>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 fastrerandomize developers</p> 
    </footer>
</body>
</html>
